---
metadata:
  title: Determination of Free Meal Eligibility
  short title: Free Meals for Students
  description: An interview to determine if a student is eligible for free meals based on Article 1.
---
mandatory: True
code: |
  # Initialization of variables
  eligible = False
  priority = False
  interview_complete = False  # Ensure the interview doesn’t end prematurely
---
question: Are you an active student at a domestic Higher Education Institution (A.E.I.), a hosted student, or a foreign scholarship recipient of the Ministry of Education?
yesno: is_student
---
question: Do you already hold a degree, master’s, or doctoral title corresponding to your current study cycle?
yesno: has_degree
---
code: |
  if not is_student or has_degree:
    eligible = False
    final_result = "You are not eligible for free meals."
    interview_complete = True
---
question: Do you belong to any of the following special categories?
subquestion: |
  - Parent or child of a large family (polýteknoi)
  - Parent or child of a family with 3 living children
  - Have a sibling who is an active first-cycle student in a different city from your parents’ permanent residence
  - Orphaned by one or both parents and under 25 years old
  - Child of an unmarried mother with an unrecognized child under 25 years old
  - Have parents, children, siblings, or a spouse with a severe disability
  - Suffer from serious illnesses (Law 3794/2009)
  - Child of a terrorism victim and under 25 years old
yesno: special_category
---
code: |
  if special_category:
    eligible = True
    priority = True
    final_result = "You are eligible for free meals with priority due to a special category."
    interview_complete = True
---
question: Are you a married student?
yesno: is_married
---
question: |
  ${ "Do you or your spouse receive unemployment benefits?" if is_married else "Do you or one of your parents receive unemployment benefits?" }
yesno: receives_unemployment
---
code: |
  if receives_unemployment:
    eligible = True
    final_result = "You are eligible for free meals due to unemployment benefits."
    interview_complete = True
---
question: What is your annual family income (in euros)?
subquestion: |
  ${ "Include your income, your spouse’s income, and that of your minor children." if is_married else "Include your income, your parents’ income, and that of your minor siblings." }
fields:
  - Income: family_income
    datatype: number
---
question: If you are unmarried, are you over 25 years old?
yesno: over_25
show if:
  variable: is_married
  is: False
---
question: What is your individual income (in euros)?
fields:
  - Income: individual_income
    datatype: number
show if:
  variable: over_25
  is: True
---
question: How many children does your family have?
subquestion: |
  ${ "Indicate the number of your minor children." if is_married else "Indicate the number of children in your parents’ family (including yourself)." }
fields:
  - Number of children: num_children
    datatype: integer
    min: 1
---
question: How many of your siblings are active first-cycle students?
fields:
  - Number: num_student_siblings
    datatype: integer
    min: 0
show if:
  variable: is_married
  is: False
---
code: |
  income_limit = 45000
  if is_married:
    income_limit += num_children * 5000
    relevant_income = family_income
  else:
    if over_25:
      income_limit = 25000
      relevant_income = individual_income
    else:
      income_limit += (num_children - 1) * 5000
      income_limit += num_student_siblings * 3000
      relevant_income = family_income
---
question: Are you required to submit a tax return?
subquestion: |
  ${ "You or your spouse?" if is_married else "You or your parents?" }
yesno: tax_obligation
show if: |
  relevant_income > income_limit
---
question: Have you submitted a declaration stating that you are not required to file a tax return?
yesno: tax_exemption_declaration
show if: |
  relevant_income > income_limit and not tax_obligation
---
question: Do you permanently reside in the municipality where the canteen or institution (if no canteen exists) is located?
yesno: lives_locally
---
code: |
  if lives_locally:
    adjusted_income_limit = income_limit * 0.9
  else:
    adjusted_income_limit = income_limit

  if relevant_income <= adjusted_income_limit:
    eligible = True
  elif not tax_obligation and tax_exemption_declaration:
    eligible = True
  else:
    eligible = False
---
question: Does the canteen or the Student Welfare Committee request additional evidence?
yesno: additional_evidence_required
---
question: Does the additional evidence confirm the eligibility conditions?
yesno: evidence_confirmed
show if: additional_evidence_required
---
code: |
  if additional_evidence_required:
    eligible = evidence_confirmed

  if eligible:
    final_result = "You are eligible for free meals."
  else:
    final_result = "You are not eligible for free meals."

  interview_complete = True
---
question: Result
subquestion: |
  ${ final_result }
buttons:
  - Exit: exit
---